---
layout: post
title: 程序更新到正式服务器产生的问题分析记录
description: 更新问题梳理
key: 程序员
---

## 目前开发环境分析 ##

1.本地开发环境，每个人的本地开发环境都一样，所有人共用同一个测试数据库，并以SVN进行连接；

2.测试环境，测试环境主要把开发者提交的程序自动update到测试运行环境，测试环境的数据库和本地开发环境共用一个数据库；

3.正式运行环境，正式运行环境是一个独立的环境，数据库结构一般来说是一致的，但数据不一致，公用数据在每次进行程序更新的时候，数据保持同步，并进行数据库结构对比保持数据表结构同步。

4.更新方式为把测试服务器上测试没问题的版本（trunk）合并到branch版本进行更新。

## 目前更新产生问题的原因分析 ##

1.环境产生的问题，一般来说，更新的时候注意一下基本上不会产生什么较大问题，一般产生问题的环节基本上都是程序本身原因。

2.  程序数据判断不严谨，这种情况是在做本地开发或者是测试服务器上运行的时候，添加了很多测试数据，但在正式服务器上的时候，并没有这些测试数据，自然就出问题了；另外一方面就是由于新的需求变更，数据表结构的变更，造成关联查询数据的时候，查不到数据，但是又要取数据，也就造成了程序运行问题。

3. 数据查询条件不严谨，在查询数据的时候，不管是多一个状态还是少一个状态，最后产生的结果都是天差地别，比如查询用户的文章，加入这个文章已经做了假性删除，那么没有加假性删除判断，最后会把删除的文章也查出来；比如订单忽略了付款成功状态，在发货的时候很可能把用户没有付款的订单也进行了发货处理等等。

4.更新时候由于不同开发者开发造成的新旧版本程序的相互影响。

5.没有做白盒测试，只有黑盒测试。